{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Munawar/Desktop/Mern-Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Munawar/Desktop/Mern-Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Munawar/Desktop/Mern-Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import UserMenu from\"../../components/Layout/UserMenu\";import Layout from\"./../../components/Layout/Layout\";import axios from\"axios\";import{useAuth}from\"../../context/auth\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Orders=function Orders(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useAuth=useAuth(),_useAuth2=_slicedToArray(_useAuth,2),auth=_useAuth2[0],setAuth=_useAuth2[1];var getOrders=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/v1/auth/orders\");case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setOrders(data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getOrders(){return _ref.apply(this,arguments);};}();useEffect(function(){if(auth!==null&&auth!==void 0&&auth.token)getOrders();},[auth===null||auth===void 0?void 0:auth.token]);return/*#__PURE__*/_jsx(Layout,{title:\"Your Orders\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-flui p-3 m-3 dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(UserMenu,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"All Orders\"}),orders===null||orders===void 0?void 0:orders.map(function(o,i){var _o$buyer,_o$products,_o$products2;return/*#__PURE__*/_jsxs(\"div\",{className:\"border shadow\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Buyer\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\" date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Payment\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Quantity\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:o.status}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:(_o$buyer=o.buyer)===null||_o$buyer===void 0?void 0:_o$buyer.name}),/*#__PURE__*/_jsx(\"td\",{children:moment(o===null||o===void 0?void 0:o.createAt).fromNow()}),/*#__PURE__*/_jsx(\"td\",{children:o!==null&&o!==void 0&&o.payment.success?\"Success\":\"Failed\"}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:(_o$products=o.products)===null||_o$products===void 0?void 0:_o$products.length})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:o===null||o===void 0?void 0:(_o$products2=o.products)===null||_o$products2===void 0?void 0:_o$products2.map(function(p,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-2 p-3 card flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/api/v1/product/product-photo/\".concat(p._id),className:\"card-img-top\",alt:p.name,width:\"100px\",height:\"100px\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8\",children:[/*#__PURE__*/_jsx(\"p\",{children:p.name}),/*#__PURE__*/_jsx(\"p\",{children:p.description.substring(0,30)}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price : \",p.price]})]})]},p._id);})})]});})]})]})})});};export default Orders;","map":{"version":3,"names":["React","useState","useEffect","UserMenu","Layout","axios","useAuth","moment","Orders","orders","setOrders","auth","setAuth","getOrders","get","data","console","log","token","map","o","i","status","buyer","name","createAt","fromNow","payment","success","products","length","p","_id","description","substring","price"],"sources":["C:/Users/Munawar/Desktop/Mern-Project/client/src/pages/user/Orders.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport UserMenu from \"../../components/Layout/UserMenu\";\nimport Layout from \"./../../components/Layout/Layout\";\nimport axios from \"axios\";\nimport { useAuth } from \"../../context/auth\";\nimport moment from \"moment\";\n\nconst Orders = () => {\n  const [orders, setOrders] = useState([]);\n  const [auth, setAuth] = useAuth();\n  const getOrders = async () => {\n    try {\n      const { data } = await axios.get(\"/api/v1/auth/orders\");\n      setOrders(data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    if (auth?.token) getOrders();\n  }, [auth?.token]);\n  return (\n    <Layout title={\"Your Orders\"}>\n      <div className=\"container-flui p-3 m-3 dashboard\">\n        <div className=\"row\">\n          <div className=\"col-md-3\">\n            <UserMenu />\n          </div>\n          <div className=\"col-md-9\">\n            <h1 className=\"text-center\">All Orders</h1>\n            {orders?.map((o, i) => {\n              return (\n                <div className=\"border shadow\">\n                  <table className=\"table\">\n                    <thead>\n                      <tr>\n                        <th scope=\"col\">#</th>\n                        <th scope=\"col\">Status</th>\n                        <th scope=\"col\">Buyer</th>\n                        <th scope=\"col\"> date</th>\n                        <th scope=\"col\">Payment</th>\n                        <th scope=\"col\">Quantity</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr>\n                        <td>{i + 1}</td>\n                        <td>{o?.status}</td>\n                        <td>{o?.buyer?.name}</td>\n                        <td>{moment(o?.createAt).fromNow()}</td>\n                        <td>{o?.payment.success ? \"Success\" : \"Failed\"}</td>\n                        <td>{o?.products?.length}</td>\n                      </tr>\n                    </tbody>\n                  </table>\n                  <div className=\"container\">\n                    {o?.products?.map((p, i) => (\n                      <div className=\"row mb-2 p-3 card flex-row\" key={p._id}>\n                        <div className=\"col-md-4\">\n                          <img\n                            src={`/api/v1/product/product-photo/${p._id}`}\n                            className=\"card-img-top\"\n                            alt={p.name}\n                            width=\"100px\"\n                            height={\"100px\"}\n                          />\n                        </div>\n                        <div className=\"col-md-8\">\n                          <p>{p.name}</p>\n                          <p>{p.description.substring(0, 30)}</p>\n                          <p>Price : {p.price}</p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Orders;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}