{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Munawar/Desktop/Mern-Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Munawar/Desktop/Mern-Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Munawar/Desktop/Mern-Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import toast from\"react-hot-toast\";import AdminMenu from\"../../components/Layout/AdminMenu\";import Layout from\"../../components/Layout/Layout\";import{useAuth}from\"../../context/auth\";import moment from\"moment\";import{Select}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Option=Select.Option;var AdminOrders=function AdminOrders(){var _useState=useState([\"Not Process\",\"Processing\",\"Shipped\",\"deliverd\",\"cancel\"]),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),changeStatus=_useState4[0],setCHangeStatus=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),orders=_useState6[0],setOrders=_useState6[1];var _useAuth=useAuth(),_useAuth2=_slicedToArray(_useAuth,2),auth=_useAuth2[0],setAuth=_useAuth2[1];var getOrders=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/v1/auth/all-orders\");case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setOrders(data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getOrders(){return _ref.apply(this,arguments);};}();useEffect(function(){if(auth!==null&&auth!==void 0&&auth.token)getOrders();},[auth===null||auth===void 0?void 0:auth.token]);var handleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(orderId,value){var _yield$axios$put,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.put(\"/api/v1/auth/order-status/\".concat(orderId),{status:value});case 3:_yield$axios$put=_context2.sent;data=_yield$axios$put.data;getOrders();_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return function handleChange(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Layout,{title:\"All Orders Data\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row dashboard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(AdminMenu,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"All Orders\"}),orders===null||orders===void 0?void 0:orders.map(function(o,i){var _o$buyer,_o$products,_o$products2;return/*#__PURE__*/_jsxs(\"div\",{className:\"border shadow\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Buyer\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\" date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Payment\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Quantity\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Select,{bordered:false,onChange:function onChange(value){return handleChange(o._id,value);},defaultValue:o===null||o===void 0?void 0:o.status,children:status.map(function(s,i){return/*#__PURE__*/_jsx(Option,{value:s,children:s},i);})})}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:(_o$buyer=o.buyer)===null||_o$buyer===void 0?void 0:_o$buyer.name}),/*#__PURE__*/_jsx(\"td\",{children:moment(o===null||o===void 0?void 0:o.createAt).fromNow()}),/*#__PURE__*/_jsx(\"td\",{children:o!==null&&o!==void 0&&o.payment.success?\"Success\":\"Failed\"}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:(_o$products=o.products)===null||_o$products===void 0?void 0:_o$products.length})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:o===null||o===void 0?void 0:(_o$products2=o.products)===null||_o$products2===void 0?void 0:_o$products2.map(function(p,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-2 p-3 card flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/api/v1/product/product-photo/\".concat(p._id),className:\"card-img-top\",alt:p.name,width:\"100px\",height:\"100px\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8\",children:[/*#__PURE__*/_jsx(\"p\",{children:p.name}),/*#__PURE__*/_jsx(\"p\",{children:p.description.substring(0,30)}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price : \",p.price]})]})]},p._id);})})]});})]})]})});};export default AdminOrders;","map":{"version":3,"names":["React","useState","useEffect","axios","toast","AdminMenu","Layout","useAuth","moment","Select","Option","AdminOrders","status","setStatus","changeStatus","setCHangeStatus","orders","setOrders","auth","setAuth","getOrders","get","data","console","log","token","handleChange","orderId","value","put","map","o","i","_id","s","buyer","name","createAt","fromNow","payment","success","products","length","p","description","substring","price"],"sources":["C:/Users/Munawar/Desktop/Mern-Project/client/src/pages/Admin/AdminOrders.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport toast from \"react-hot-toast\";\nimport AdminMenu from \"../../components/Layout/AdminMenu\";\nimport Layout from \"../../components/Layout/Layout\";\nimport { useAuth } from \"../../context/auth\";\nimport moment from \"moment\";\nimport { Select } from \"antd\";\nconst { Option } = Select;\n\nconst AdminOrders = () => {\n  const [status, setStatus] = useState([\n    \"Not Process\",\n    \"Processing\",\n    \"Shipped\",\n    \"deliverd\",\n    \"cancel\",\n  ]);\n  const [changeStatus, setCHangeStatus] = useState(\"\");\n  const [orders, setOrders] = useState([]);\n  const [auth, setAuth] = useAuth();\n  const getOrders = async () => {\n    try {\n      const { data } = await axios.get(\"/api/v1/auth/all-orders\");\n      setOrders(data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    if (auth?.token) getOrders();\n  }, [auth?.token]);\n\n  const handleChange = async (orderId, value) => {\n    try {\n      const { data } = await axios.put(`/api/v1/auth/order-status/${orderId}`, {\n        status: value,\n      });\n      getOrders();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return (\n    <Layout title={\"All Orders Data\"}>\n      <div className=\"row dashboard\">\n        <div className=\"col-md-3\">\n          <AdminMenu />\n        </div>\n        <div className=\"col-md-9\">\n          <h1 className=\"text-center\">All Orders</h1>\n          {orders?.map((o, i) => {\n            return (\n              <div className=\"border shadow\">\n                <table className=\"table\">\n                  <thead>\n                    <tr>\n                      <th scope=\"col\">#</th>\n                      <th scope=\"col\">Status</th>\n                      <th scope=\"col\">Buyer</th>\n                      <th scope=\"col\"> date</th>\n                      <th scope=\"col\">Payment</th>\n                      <th scope=\"col\">Quantity</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr>\n                      <td>{i + 1}</td>\n                      <td>\n                        <Select\n                          bordered={false}\n                          onChange={(value) => handleChange(o._id, value)}\n                          defaultValue={o?.status}\n                        >\n                          {status.map((s, i) => (\n                            <Option key={i} value={s}>\n                              {s}\n                            </Option>\n                          ))}\n                        </Select>\n                      </td>\n                      <td>{o?.buyer?.name}</td>\n                      <td>{moment(o?.createAt).fromNow()}</td>\n                      <td>{o?.payment.success ? \"Success\" : \"Failed\"}</td>\n                      <td>{o?.products?.length}</td>\n                    </tr>\n                  </tbody>\n                </table>\n                <div className=\"container\">\n                  {o?.products?.map((p, i) => (\n                    <div className=\"row mb-2 p-3 card flex-row\" key={p._id}>\n                      <div className=\"col-md-4\">\n                        <img\n                          src={`/api/v1/product/product-photo/${p._id}`}\n                          className=\"card-img-top\"\n                          alt={p.name}\n                          width=\"100px\"\n                          height={\"100px\"}\n                        />\n                      </div>\n                      <div className=\"col-md-8\">\n                        <p>{p.name}</p>\n                        <p>{p.description.substring(0, 30)}</p>\n                        <p>Price : {p.price}</p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default AdminOrders;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}